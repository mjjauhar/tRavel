<%- include('../partials/header.ejs') %>
<section style="background-color: #f7f8f9">
  <%- include('../partials/navbar.ejs') %>
  <div class="container-fluid mt-4">
    <div class="row">
      <div class="col-md-3 d-none">
        <div class="rectangle ps-4 pt-2 text-dark">
          <% if(full_name) { %>
          <h5><b><%= full_name %></b></h5>
          <% } else { %>
          <h5><b><%= username %></b></h5>
          <% } %>
          <p><%= phone_no %></p>
        </div>

        <a href="/my_orders" class="text-decoration-none"
          ><div class="rectangle d-flex ps-4 align-items-center text-dark">
            <i class="bi bi-cart2"></i>
            <big> &ensp; My Orders</big>
          </div></a
        >
        <a href="/user/account" class="text-decoration-none"
          ><div
            class="selected_rectangle d-flex ps-4 align-items-center text-dark"
          >
            <i class="bi bi-person"></i>
            <big> &ensp; My Profile</big>
          </div></a
        >

        <a href="/user/address" class="text-decoration-none"
          ><div class="rectangle d-flex ps-4 align-items-center text-dark">
            <i class="bi bi-envelope"></i>
            <big> &ensp; Address</big>
          </div></a
        >

        <form
          method="post"
          action="/user/logout"
          class="rectangle ps-2 d-flex align-items-center"
        >
          <button class="btn-lg text-decoration-none btn text-danger">
            <i class="bi bi-box-arrow-right"></i> &ensp; Logout
          </button>
        </form>
      </div>
      <div class="col-md-9">
        <a href="/user/address" class="btn btn-sm btn-outline-secondary w-100 mb-3">See addresses</a>
        <form method="post" action="/user/account/<%= userId %>">
          <div class="container-fluid">
            <div class="row">
              <div class="col-6">
                <div class="mb-5">
                  <label for="username" class="form-label">username</label>
                  <input
                    id="id"
                    type="text"
                    class="form-control"
                    name="username"
                    pattern="^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$"
                    value="<%= username %>"
                  />
                </div>
                <div class="mb-5">
                  <label for="first_name" class="form-label">First name</label>
                  <input
                    id="id"
                    type="text"
                    class="form-control"
                    name="first_name"
                    pattern="^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z._]+(?<![_.])$"
                    required
                    value="<%= first_name %>"
                  />
                </div>

                <div class="mb-5">
                  <label for="phone_no" class="form-label">Mobile Number</label>
                  <input
                    id="id"
                    type="tel"
                    class="form-control"
                    name="phone_no"
                    required
                    value="<%= phone_no %>"
                    pattern="^(?!0+$)(\+\d{1,3}[- ]?)?(?!0+$)\d{10}$"
                  />
                </div>
              </div>
              <div class="col-6">
                <div class="mb-5">
                  <label for="gender" class="form-label">Gender</label>
                  <select
                    name="gender"
                    class="form-select form-select"
                    aria-label=".form-select-sm example"
                    required
                  >
                    <% if(gender) { %>
                    <option selected><%= gender %></option>
                    <% } else { %>
                    <option selected>Select an option</option>
                    <% } %> <% if(gender === "male") { %>
                    <option value="female">female</option>
                    <% } else if(gender === "female") { %>
                    <option value="male">male</option>
                    <% } else { %>
                    <option value="female">female</option>
                    <option value="male">male</option>
                    <% } %>
                  </select>
                </div>
                <div class="mb-5">
                  <label for="last_name" class="form-label">Last name</label>
                  <input
                    id="id"
                    type="text"
                    class="form-control"
                    name="last_name"
                    pattern="^(?=.{3,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z._]+(?<![_.])$"
                    required
                    value="<%= last_name %>"
                  />
                </div>
                <div class="mb-5">
                  <label for="email" class="form-label">Email</label>
                  <input
                    id="id"
                    type="email"
                    class="form-control"
                    name="email"
                    value="<%= email %>"
                    required
                    pattern="^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$"
                  />
                </div>
              </div>
            </div>
            <div class="text-end">
              <button
                type="button"
                class="btn btn-secondary"
                onclick="window.location.reload()"
              >
                Reset
              </button>
              <!-- Button trigger modal -->
              <button
                type="button"
                class="btn btn-dark"
                data-bs-toggle="modal"
                data-bs-target="#exampleModal"
              >
                Save changes
              </button>
              <!-- Modal -->
              <div
                class="modal fade"
                id="exampleModal"
                tabindex="-1"
                aria-labelledby="exampleModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered text-start">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h1 class="modal-title fs-5" id="exampleModalLabel">
                        Save Edits
                      </h1>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <div class="modal-body">
                      Are you sure you want to save the edits ?
                    </div>
                    <div class="modal-footer">
                      <button
                        type="button"
                        class="btn btn-secondary"
                        data-bs-dismiss="modal"
                        onclick="window.location.reload()"
                      >
                        Close
                      </button>
                      <button type="submit" class="btn btn-primary">
                        Save changes
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<%- include('../partials/footer_infos.ejs') %> <%-
include('../partials/footer.ejs') %>
