<%- include('../partials/header.ejs') %> <%- include('../partials/navbar.ejs')
%>

<div class="container-fluid mt-2">
  <div class="row">
    <div class="col-6">
      <div
        id="carouselExampleFade"
        class="carousel slide carousel-fade"
        data-bs-ride="carousel"
      >
        <div class="carousel-inner rounded">
          <div class="carousel-item active">
            <img
              src="/<%= product.imgUrl[0] %>"
              class="d-block w-100"
              alt="..."
            />
          </div>
          <% let imgs = product.imgUrl %> <% imgs.forEach(img => { %>
          <div class="carousel-item">
            <img src="/<%= img %>" class="d-block w-100" alt="..." />
          </div>
          <% }); %>
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#carouselExampleFade"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#carouselExampleFade"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
    <div class="col-6" id="productCard">
      <p class="fw-bold h4 mt-5 ms-5"><%= product.name %></p>
      <p class="mt-4 ms-5"><%= product.description %></p>
      <p class="h2 mt-4 ms-5">Rs <%= product.price %></p>

      <!-- add to wishlist  -->
      <% if ( login ) { %> <% let inCart = cartItems.some(item =>
      item.productId.toString() === product._id.toString() ) %> <% if(inCart) {
      %>
      <a href="/cart"
        ><button class="btn w-75 ms-5 btn-secondary">Go to cart</button></a
      >
      <% } else { %>
      <button
        class="btn w-75 ms-5 btn-warning"
        onclick="addToCart('<%= product._id %>')"
      >
        Add to cart
      </button>
      <% } %> <% let inWishlist = wishlistItems.some(item => item._id.toString()
      === product._id.toString() ) %> <% if(inWishlist) { %>
      <button
        class="btn-lg btn"
        id="removeItem"
        onclick="removeFromWishlist('<%= product._id %>')"
      >
        <i class="bi bi-heart-fill text-danger"></i>
      </button>
      <% } else { %>
      <button
        id="addItem"
        class="btn-lg btn"
        onclick="addToWishlist('<%= product._id %>')"
      >
        <i class="bi bi-heart text-danger"></i>
      </button>
      <% }} %>
    </div>
  </div>
</div>

<%- include('../partials/footer_infos.ejs') %> <%-
include('../partials/footer.ejs') %>
